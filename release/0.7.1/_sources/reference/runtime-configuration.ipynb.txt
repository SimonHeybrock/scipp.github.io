{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Runtime Configuration\n",
    "\n",
    "The `scipp` Python module supports several configuration options which may be set based on preference.\n",
    "Most of these are related to layout of items in Jupyter Notebooks and plotting.\n",
    "\n",
    "The location of the configuration file varies between operating systems.\n",
    "To determine where it is located on a particular installation the following Python may be used:"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "import scipp as sc\n",
    "print(sc.user_configuration_filename)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "When the `scipp` module is imported and no configuration file exists a default one is created.\n",
    "If a configuration file already exists it will not be modified, i.e. new options will not automatically be added to it when Scipp is updated.\n",
    "\n",
    "Values may be set via Python as follows:"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "print('Old value:', sc.config.plot.width)\n",
    "sc.config.update({'plot.width': 300})\n",
    "print('New value:', sc.config.plot.width)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Note that changes made via the Python API are not persisted in the configuration file.\n",
    "Permanent changes must be made to the file directly."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "<div class=\"alert alert-warning\">\n",
    "    \n",
    "**Warning**\n",
    "\n",
    "The fields in the configuration file are not strictly defined and may vary between Scipp versions.\n",
    "For this reason it is advised to browse this file to determine what options are available.\n",
    "    \n",
    "</div>"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## List of configuration options\n",
    "\n",
    "### `config.plot`\n",
    "\n",
    "- `color`: The list of default line colors for one-dimensional plots. When multiple lines are on the same plot, the first line will use the first color, the second line will use the second color, and so on.\n",
    "    - Default: `[\"#1f77b4\", \"#ff7f0e\", \"#2ca02c\", \"#d62728\", \"#9467bd\", \"#8c564b\", \"#e377c2\", \"#7f7f7f\", \"#bcbd22\", \"#17becf\"]`.\n",
    "    - Allowed: A list of html color codes or names (see https://matplotlib.org/stable/gallery/color/named_colors.html).\n",
    "\n",
    "\n",
    "- `params`: The colorbar properties.\n",
    "    - `params.cmap`: The matplotlib colormap.\n",
    "        - Default: `\"viridis\"`.\n",
    "        - Allowed: Any matplotlib colormap name (see https://matplotlib.org/stable/gallery/color/colormap_reference.html).\n",
    "    - `params.norm`: The normalization for y values (1d plots) or color values (2+d plots).\n",
    "        - Default: `\"linear\"`.\n",
    "        - Allowed: `\"linear\"` or `\"log\"`.\n",
    "    - `params.vmin`: Set the minimum value for the y-axis (1d plots) or the colorbar (2+d plots).\n",
    "        - Default: `None`.\n",
    "        - Allowed: A numeric value.\n",
    "    - `params.vmax`: Set the maximum value for the y-axis (1d plots) or the colorbar (2+d plots).\n",
    "        - Default: `None`.\n",
    "        - Allowed: A numeric value.\n",
    "    - `params.color`: The default line color. If `None`, a value will be chosen from the `config.plot.color` list above.\n",
    "        - Default: `None`.\n",
    "        - Allowed: A html color code or name.\n",
    "    - `params.cbar`: Show the colorbar if `True`.\n",
    "        - Default: `True`.\n",
    "        - Allowed: `True` or `False`.\n",
    "    - `params.nan_color`: The colormap color for NaN values.\n",
    "        - Default: `\"#d3d3d3\"`.\n",
    "        - Allowed: A html color code or name.\n",
    "    - `params.under_color`: The colormap color for underflow values.\n",
    "        - Default: `\"#9467bd\"`.\n",
    "        - Allowed: A html color code or name.\n",
    "    - `params.over_color`: The colormap color for underflow values.\n",
    "        - Default: `\"#8c564b\"`.\n",
    "        - Allowed: A html color code or name.\n",
    "\n",
    "- `height`: The figure height (in pixels).\n",
    "    - Default: `467`.\n",
    "    - Allowed: An integer number > 0.\n",
    "\n",
    "\n",
    "- `width`: The figure width (in pixels).\n",
    "    - Default: `700`.\n",
    "    - Allowed: An integer number > 0.\n",
    "\n",
    "\n",
    "- `dpi`: The figure resolution.\n",
    "    - Default: `96`.\n",
    "    - Allower: An integer number > 0.\n",
    "\n",
    "\n",
    "- `aspect`: Aspect ratio for images: `\"equal\"` will conserve the aspect ratio, while `\"auto\"` will stretch the image to the size of the figure.\n",
    "    - Default: `\"auto\"`.\n",
    "    - Allowed: `\"auto\"` or `\"equal\"`.\n",
    "\n",
    "\n",
    "- `marker`: List of matplotlib line markers. When multiple lines are on the same plot, the first line will use the first marker, the second line will use the second marker, and so on.\n",
    "    - Default: `[ \"o\", \"^\", \"s\", \"d\", \"*\", \"1\", \"P\", \"h\", \"X\", \"v\", \"<\", \">\", \"2\", \"3\", \"4\", \"8\", \"p\", \"H\", \"+\", \"x\", \"D\"]`.\n",
    "    - Allowed: A list of matplotlib markers (see https://matplotlib.org/stable/api/markers_api.html).\n",
    "\n",
    "\n",
    "- `linewidth`: Line widths for one-dimensional plots.\n",
    "    - Default: `[1.5]`.\n",
    "    - Allowed: A list of integers or floats.\n",
    "\n",
    "\n",
    "- `linestyle`: Line styles for one-dimensional histogram plots.\n",
    "    - Default: `[\"none\"]`.\n",
    "    - Allowed: A list of line styles (see https://matplotlib.org/stable/gallery/lines_bars_and_markers/linestyles.html).\n",
    "\n",
    "\n",
    "- `padding`: Padding around figure axes.\n",
    "    - Default: `[0.05, 0.02, 1, 1]`.\n",
    "    - Allowed: A list of 4 numbers representing the left, bottom, right, and top edges, respectively.\n",
    "\n",
    "\n",
    "- `pixel_ratio`: Monitor pixel ratio (see https://developer.mozilla.org/en-US/docs/Web/API/Window/devicePixelRatio). This affects the size of the points in three-dimensional plots. Set to > 1 for high density (e.g. retina) displays\n",
    "    - Default: `1.0`.\n",
    "    - Allowed: A numeric value.\n",
    "\n",
    "### `config.colors`:\n",
    "\n",
    "The color scheme for the `scipp.table` and `scipp.show` functions, and the control buttons around the plots.\n",
    "\n",
    "- `attrs`: Color for attributes.\n",
    "    - Default: `\"#ff5555\"`.\n",
    "    - Allowed: A html color code or name.\n",
    "\n",
    "\n",
    "- `coords`: Color for coordinates.\n",
    "    - Default: `\"#c6e590\"`.\n",
    "    - Allowed: A html color code or name.\n",
    "\n",
    "\n",
    "- `data`: Color for data.\n",
    "    - Default: `\"#f6d028\"`.\n",
    "    - Allowed: A html color code or name.\n",
    "\n",
    "\n",
    "- `masks`: Color for masks.\n",
    "    - Default: `\"#c8c8c8\"`.\n",
    "    - Allowed: A html color code or name.\n",
    "\n",
    "\n",
    "- `hover`: Color for hovering on table rows.\n",
    "    - Default: `\"#d6eaf8\"`.\n",
    "    - Allowed: A html color code or name.\n",
    "\n",
    "\n",
    "- `header_text`: Color for table header text.\n",
    "    - Default: `\"#111111\"`.\n",
    "    - Allowed: A html color code or name.\n",
    "\n",
    "\n",
    "- `button`: Color for plot control button.\n",
    "    - Default: `\"#bdbdbd49\"`.\n",
    "    - Allowed: A html color code or name.\n",
    "\n",
    "\n",
    "- `button_selected`: Color for selected plot control button.\n",
    "    - Default: `\"#bdbdbdbb\"`.\n",
    "    - Allowed: A html color code or name.\n",
    "\n",
    "### Other\n",
    "\n",
    "- `config.table_max_size`: The maximum number of rows to display in tables generated by `sc.table()`.\n",
    "    - Default: `50`.\n",
    "    - Allowed: An integer > 1.\n"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.9.2"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}
